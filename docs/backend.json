
{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Go2Culture platform, who can be a guest, a host, or both.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "role": {
          "type": "string",
          "enum": ["guest", "host", "both"],
          "description": "The role of the user within the platform."
        },
        "fullName": {
          "type": "string",
          "description": "The user's full name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "phone": {
          "type": "string",
          "description": "The user's phone number."
        },
        "website": {
          "type": "string",
          "format": "uri",
          "description": "The user's personal or professional website."
        },
        "socialMedia": {
          "type": "object",
          "description": "Links to the user's social media profiles.",
          "properties": {
            "twitter": {
              "type": "string",
              "format": "uri"
            },
            "instagram": {
              "type": "string",
              "format": "uri"
            },
            "facebook": {
              "type": "string",
              "format": "uri"
            }
          }
        },
        "profilePhotoId": {
          "type": "string"
        },
        "bio": {
          "type": "string",
          "description": "A short bio about the user."
        },
        "profession": {
          "type": "string",
          "description": "The user's profession."
        },
        "birthDate": {
          "type": "string",
          "format": "date",
          "description": "The user's date of birth."
        },
        "languages": {
          "type": "array",
          "items": { "type": "string" },
          "description": "A list of languages the user speaks."
        },
        "brandName": {
          "type": "string",
          "description": "The user's brand name, if they have one."
        },
        "preferences": {
          "type": "object",
          "properties": {
            "cuisines": {
              "type": "array",
              "items": { "type": "string" }
            },
            "dietary": {
              "type": "array",
              "items": { "type": "string" }
            },
            "guiltyPleasures": {
              "type": "string"
            },
            "priceRange": {
              "type": "object",
              "properties": {
                "min": { "type": "number" },
                "max": { "type": "number" }
              }
            }
          }
        },
        "location": {
          "type": "object",
          "properties": {
            "country": { "type": "string" },
            "region": { "type": "string" },
            "suburb": { "type": "string" },
            "city": { "type": "string" }
          }
        },
        "status": {
          "type": "string",
          "enum": ["active", "suspended", "deleted"],
          "description": "The status of the user's account."
        },
        "termsAccepted": {
            "type": "boolean",
            "description": "Indicates if the user has accepted the platform's terms and conditions."
        },
        "referralCode": {
          "type": "string",
          "description": "The user's unique referral code."
        },
        "referralCredit": {
          "type": "number",
          "description": "The amount of referral credit the user has available."
        },
        "referredBy": {
          "type": "string",
          "description": "The referral code of the user who referred this user."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["id", "role", "fullName", "email", "status", "createdAt", "updatedAt"]
    },
    "Host": {
      "title": "Host",
      "type": "object",
      "description": "Represents a host on the Go2Culture platform who offers cultural experiences.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the Host entity." },
        "userId": { "type": "string", "description": "Reference to User. (Relationship: User 1:1 Host)." },
        "name": { "type": "string", "description": "Denormalized host name for display." },
        "level": {
          "type": "string",
          "enum": ["Superhost"],
          "description": "A special status awarded to top-rated and experienced hosts."
        },
        "profilePhotoId": { "type": "string" },
        "status": { "type": "string", "enum": ["draft", "under_review", "approved", "needs_changes", "suspended"] },
        "profile": {
          "type": "object",
          "properties": {
            "bio": { "type": "string" },
            "culturalBackground": { "type": "string" },
            "hostingStyles": { "type": "array", "items": { "type": "string" } },
            "achievements": {
              "type": "array",
              "items": { "type": "string" },
              "description": "A list of culinary achievements or certifications."
            }
          }
        },
        "verification": {
          "type": "object",
          "properties": {
            "idVerified": { "type": "boolean" },
            "selfieVerified": { "type": "boolean" },
            "verifiedAt": { "type": "string", "format": "date-time" }
          }
        },
        "location": {
          "type": "object",
          "properties": {
            "country": { "type": "string" },
            "region": { "type": "string" },
            "suburb": { "type": "string" },
            "localArea": { "type": "string" },
            "postcode": { "type": "string" }
          }
        },
        "homeSetup": {
          "type": "object",
          "properties": {
            "homeType": { "type": "string" },
            "seating": { "type": "string" },
            "maxGuests": { "type": "number" },
            "pets": { "type": "boolean" },
            "smoking": { "type": "boolean" },
            "accessibility": { "type": "string" },
            "familyFriendly": { "type": "boolean", "description": "Indicates if the location is suitable for children." },
            "elevator": { "type": "boolean", "description": "Indicates if there is an elevator in the building." },
            "airConditioning": { "type": "boolean", "description": "Indicates if air conditioning is available." },
            "taxiNearby": { "type": "boolean", "description": "Indicates if there is a taxi station nearby." },
            "publicTransportNearby": { "type": "boolean", "description": "Indicates if public transport is easily accessible." },
            "wifi": { "type": "boolean", "description": "Indicates if WiFi is available for guests." }
          }
        },
        "compliance": {
          "type": "object",
          "properties": {
            "foodBusinessRegistered": { "type": "boolean" },
            "councilName": { "type": "string" },
            "foodSafetyTrainingCompleted": { "type": "boolean" },
            "foodActClassification": { "type": "boolean" },
            "foodTraderRegistered": { "type": "boolean" },
            "foodBusinessLicense": { "type": "boolean" },
            "foodSafetySupervisor": { "type": "boolean" },
            "foodBusinessNotification": { "type": "boolean" },
            "guidelinesAccepted": { "type": "boolean" },
            "contractAccepted": { "type": "boolean" },
            "insurancePolicyAccepted": { "type": "boolean" }
          }
        },
        "rating": {
          "type": "object",
          "properties": {
            "average": { "type": "number" },
            "count": { "type": "number" }
          }
        },
        "blockedDates": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "date"
          },
          "description": "A list of dates the host has marked as unavailable."
        },
        "billingCountry": {
          "type": "string",
          "description": "The country where the host receives payouts. Stored as a two-letter ISO country code."
        },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "userId", "name", "profilePhotoId", "status", "profile", "verification", "location", "homeSetup", "compliance", "rating", "createdAt"]
    },
    "HostApplication": {
      "title": "Host Application",
      "type": "object",
      "description": "Represents a host's application to join the platform.",
      "properties": {
        "id": { "type": "string" },
        "userId": { "type": "string" },
        "hostName": { "type": "string" },
        "submittedDate": { "type": "string", "format": "date-time" },
        "status": { "type": "string", "enum": ["Pending", "Approved", "Changes Needed", "Rejected"] },
        "riskFlag": { "type": "string", "enum": ["Low", "Medium", "High", "null"] },
        "experienceId": { "type": "string", "description": "The ID of the Experience document created when this application is approved." },
        "profile": {
          "type": "object",
          "properties": {
            "profilePhotoId": { "type": "string" },
            "bio": { "type": "string", "description": "Host's story and food journey." },
            "hostingStyles": { "type": "array", "items": { "type": "string" } },
            "expertise": { "type": "string", "description": "Details about culinary background, event hosting experience, and professional training." },
            "hostingExperienceLevel": { "type": "string", "enum": ["professional", "passionate"] },
            "website": { "type": "string", "format": "uri" },
            "socialMedia": {
              "type": "object",
              "properties": {
                "facebook": { "type": "string", "format": "uri" },
                "instagram": { "type": "string", "format": "uri" },
                "twitter": { "type": "string", "format": "uri" },
                "tripadvisor": { "type": "string", "format": "uri" },
                "other": { "type": "string", "format": "uri" }
              }
            }
          }
        },
        "verification": {
          "type": "object",
          "properties": {
            "idDocId": { "type": "string" },
            "selfieId": { "type": "string" },
            "status": { "type": "string", "enum": ["Verified", "Pending", "Failed"] }
          }
        },
        "location": {
          "type": "object",
          "properties": {
            "country": { "type": "string" },
            "region": { "type": "string" },
            "suburb": { "type": "string" },
            "localArea": { "type": "string" },
            "postcode": { "type": "string" },
            "address": { "type": "string" }
          }
        },
        "homeSetup": {
          "type": "object",
          "properties": {
            "homeType": { "type": "string" },
            "seating": { "type": "string" },
            "maxGuests": { "type": "number" },
            "pets": { "type": "boolean" },
            "smoking": { "type": "boolean" },
            "accessibility": { "type": "string" },
            "familyFriendly": { "type": "boolean", "description": "Indicates if the location is suitable for children." },
            "elevator": { "type": "boolean", "description": "Indicates if there is an elevator in the building." },
            "airConditioning": { "type": "boolean", "description": "Indicates if air conditioning is available." },
            "taxiNearby": { "type": "boolean", "description": "Indicates if there is a taxi station nearby." },
            "publicTransportNearby": { "type": "boolean", "description": "Indicates if public transport is easily accessible." },
            "wifi": { "type": "boolean", "description": "Indicates if WiFi is available for guests." }
          }
        },
        "experience": {
          "type": "object",
          "properties": {
            "title": { "type": "string" },
            "description": { "type": "string" },
            "durationMinutes": { "type": "number" },
            "category": { "type": "string" },
            "menu": {
              "type": "object",
              "properties": {
                "cuisine": { "type": "string" },
                "description": { "type": "string" },
                "spiceLevel": { "type": "string", "enum": ["Mild", "Medium", "Spicy"] },
                "allergens": { "type": "string" },
                "dietary": {
                  "type": "array",
                  "items": { "type": "string" }
                }
              }
            },
            "pricing": {
              "type": "object",
              "properties": {
                "pricePerGuest": { "type": "number" },
                "maxGuests": { "type": "number" }
              }
            },
            "photos": {
              "type": "object",
              "properties": {
                "mainImageId": { "type": "string" }
              }
            }
          }
        },
        "compliance": {
          "type": "object",
          "properties": {
            "foodBusinessRegistered": { "type": "boolean" },
            "councilName": { "type": "string" },
            "foodSafetyTrainingCompleted": { "type": "boolean" },
            "foodActClassification": { "type": "boolean" },
            "foodTraderRegistered": { "type": "boolean" },
            "foodBusinessLicense": { "type": "boolean" },
            "foodSafetySupervisor": { "type": "boolean" },
            "foodBusinessNotification": { "type": "boolean" },
            "guidelinesAccepted": { "type": "boolean" },
            "agreeToFoodSafety": { "type": "boolean" }
          }
        }
      },
      "required": ["id", "userId", "hostName", "submittedDate", "status"]
    },
    "Experience": {
      "title": "Experience",
      "type": "object",
      "description": "Represents a cultural experience offered by a host.",
      "properties": {
        "id": { "type": "string" },
        "hostId": { "type": "string" },
        "userId": { "type": "string" },
        "hostName": {
          "type": "string",
          "description": "Denormalized host name for display."
        },
        "hostProfilePhotoId": {
          "type": "string",
          "description": "Denormalized host profile photo ID for display."
        },
        "title": { "type": "string" },
        "category": { "type": "string", "enum": ["In-Home Dining", "Cooking Class", "Restaurant Experience", "Special Event", "Art & Craft", "Music & Dance", "History & Walks"] },
        "description": { "type": "string" },
        "durationMinutes": { "type": "number" },
        "menu": {
          "type": "object",
          "properties": {
            "cuisine": { "type": "string" },
            "description": { "type": "string" },
            "dietary": { "type": "array", "items": { "type": "string" } },
            "allergens": { "type": "string" },
            "spiceLevel": { "type": "string", "enum": ["Mild", "Medium", "Spicy"] }
          }
        },
        "pricing": {
          "type": "object",
          "properties": {
            "pricePerGuest": { "type": "number" },
            "minGuests": { "type": "number" },
            "maxGuests": { "type": "number" }
          }
        },
        "availability": {
          "type": "object",
          "properties": {
            "days": { "type": "array", "items": { "type": "string" } },
            "timeSlots": { "type": "array", "items": { "type": "string" } }
          }
        },
        "location": {
          "type": "object",
          "properties": {
            "country": { "type": "string" },
            "region": { "type": "string" },
            "suburb": { "type": "string" },
            "localArea": { "type": "string" }
          }
        },
        "photos": {
          "type": "object",
          "properties": {
            "mainImageId": { "type": "string" },
            "thumbnailImageIds": { "type": "array", "items": { "type": "string" } }
          }
        },
        "inclusions": {
          "type": "array",
          "items": { "type": "string" },
          "description": "A list of items included in the experience (e.g., 'Welcome drink', '3-course meal')."
        },
        "whatToBring": {
          "type": "array",
          "items": { "type": "string" },
          "description": "A list of items guests should bring (e.g., 'An appetite!', 'Your own beverage')."
        },
        "status": { "type": "string", "enum": ["draft", "live", "paused"] },
        "instantBook": { "type": "boolean" },
        "rating": {
          "type": "object",
          "properties": {
            "average": { "type": "number" },
            "count": { "type": "number" }
          }
        },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "hostId", "userId", "hostName", "hostProfilePhotoId", "title", "category", "description", "durationMinutes", "menu", "pricing", "availability", "location", "photos", "status", "rating", "createdAt"]
    },
    "Booking": {
      "title": "Booking",
      "type": "object",
      "description": "Represents a booking made by a guest for an experience.",
      "properties": {
        "id": { "type": "string" },
        "guestId": { "type": "string", "description": "Reference to User." },
        "experienceId": { "type": "string", "description": "Reference to Experience." },
        "experienceTitle": { "type": "string", "description": "Denormalized experience title for display." },
        "hostId": { "type": "string", "description": "Reference to Host." },
        "hostName": { "type": "string", "description": "Denormalized host name for display." },
        "bookingDate": { "type": "string", "format": "date-time" },
        "numberOfGuests": { "type": "number" },
        "totalPrice": { "type": "number" },
        "status": { "type": "string", "enum": ["Pending", "Confirmed", "Cancelled"] },
        "cancellationReason": { "type": "string" },
        "couponId": { "type": "string" },
        "discountAmount": { "type": "number" },
        "isGift": { "type": "boolean" },
        "rescheduleRequest": {
            "type": "object",
            "description": "Details of a reschedule request, if any.",
            "properties": {
                "requestedBy": { "type": "string", "description": "The UID of the user who requested the reschedule." },
                "newDate": { "type": "string", "format": "date-time", "description": "The proposed new date and time for the booking." },
                "status": { "type": "string", "enum": ["pending", "accepted", "declined"], "description": "The status of the reschedule request." },
                "createdAt": { "type": "string", "format": "date-time", "description": "When the request was made." }
            }
        }
      },
      "required": ["id", "guestId", "experienceId", "experienceTitle", "hostId", "hostName", "bookingDate", "numberOfGuests", "totalPrice", "status"]
    },
    "Review": {
      "title": "Review",
      "type": "object",
      "description": "Represents a review given by a guest for an experience.",
      "properties": {
        "id": { "type": "string" },
        "bookingId": { "type": "string" },
        "guestId": { "type": "string", "description": "Reference to the User who wrote the review." },
        "experienceId": { "type": "string", "description": "Reference to Experience." },
        "hostId": { "type": "string", "description": "Reference to Host." },
        "rating": { "type": "number" },
        "comment": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "hostResponse": { "type": "string" },
        "flags": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["id", "bookingId", "guestId", "experienceId", "hostId", "rating", "comment", "createdAt"]
    },
    "WishlistItem": {
      "title": "Wishlist Item",
      "description": "Represents an association between a user and a wishlisted experience. The document ID is the experienceId.",
      "type": "object",
      "properties": {
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["createdAt"]
    },
    "Message": {
      "title": "Message",
      "type": "object",
      "description": "Represents a message exchanged between a host and a guest.",
      "properties": {
        "id": { "type": "string" },
        "senderId": { "type": "string", "description": "Reference to User." },
        "receiverId": { "type": "string", "description": "Reference to User." },
        "bookingId": { "type": "string", "description": "Reference to Booking." },
        "messageText": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" },
        "participants": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Array containing the UIDs of sender and receiver for security rules."
        }
      },
      "required": ["senderId", "receiverId", "bookingId", "messageText", "timestamp", "participants"]
    },
     "Conversation": {
      "title": "Conversation",
      "description": "Represents a message thread between users for a specific booking. The document ID is the bookingId.",
      "type": "object",
      "properties": {
        "bookingId": {
          "type": "string",
          "description": "The ID of the booking this conversation is associated with."
        },
        "participants": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Array of user IDs for participants in the conversation."
        },
        "participantInfo": {
          "type": "object",
          "description": "Denormalized info about the participants, keyed by userId.",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "fullName": { "type": "string" },
              "profilePhotoId": { "type": "string" }
            },
            "required": ["fullName", "profilePhotoId"]
          }
        },
        "bookingInfo": {
          "type": "object",
          "properties": {
            "experienceTitle": { "type": "string" },
            "experienceId": { "type": "string" }
          }
        },
        "lastMessage": {
          "type": "object",
          "properties": {
            "text": { "type": "string" },
            "timestamp": { "type": "string", "format": "date-time" },
            "senderId": { "type": "string" }
          }
        },
        "readBy": {
          "type": "object",
          "description": "Map of userId to a timestamp indicating when they last read the conversation.",
          "additionalProperties": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "required": ["bookingId", "participants", "participantInfo", "lastMessage", "bookingInfo"]
    },
    "Notification": {
      "title": "Notification",
      "description": "Represents a notification for a user.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "userId": { "type": "string" },
        "message": { "type": "string" },
        "link": { "type": "string", "format": "uri" },
        "isRead": { "type": "boolean" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "userId", "message", "isRead", "createdAt"]
    },
    "Report": {
      "title": "Report",
      "type": "object",
      "description": "Represents a report filed against a user, experience, or review.",
      "properties": {
        "id": { "type": "string" },
        "targetType": { "type": "string", "enum": ["Review", "Experience", "User"] },
        "targetId": { "type": "string" },
        "reason": { "type": "string" },
        "reportedBy": { "type": "string" },
        "reportedUserLink": { "type": "string" },
        "date": { "type": "string", "format": "date-time" },
        "status": { "type": "string", "enum": ["Open", "In Progress", "Resolved"] }
      },
      "required": ["id", "targetType", "targetId", "reason", "reportedBy", "date", "status"]
    },
    "AdminLog": {
      "title": "AdminLog",
      "type": "object",
      "description": "Represents a log entry for actions performed by administrators.",
      "properties": {
        "id": { "type": "string" },
        "adminId": { "type": "string", "description": "Reference to User." },
        "action": { "type": "string" },
        "affectedEntity": { "type": "string" },
        "affectedEntityId": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" },
        "details": { "type": "string" }
      },
      "required": ["id", "adminId", "action", "affectedEntity", "affectedEntityId", "timestamp"]
    },
    "Coupon": {
      "title": "Coupon",
      "type": "object",
      "description": "Represents a discount coupon.",
      "properties": {
        "id": { "type": "string", "description": "The unique coupon code." },
        "description": { "type": "string" },
        "discountType": { "type": "string", "enum": ["percentage", "fixed"] },
        "discountValue": { "type": "number" },
        "expiresAt": { "type": "string", "format": "date-time" },
        "isActive": { "type": "boolean" },
        "minSpend": { "type": "number" },
        "usageLimit": { "type": "number" },
        "timesUsed": { "type": "number" }
      },
      "required": ["id", "discountType", "discountValue", "isActive", "timesUsed"]
    },
    "Sponsor": {
      "title": "Sponsor",
      "type": "object",
      "description": "Represents a sponsor or partner of Go2Culture.",
      "properties": {
        "id": { "type": "string", "description": "The unique ID of the sponsor." },
        "name": { "type": "string", "description": "The name of the sponsor company." },
        "logoUrl": { "type": "string", "format": "uri", "description": "URL of the sponsor's logo." },
        "website": { "type": "string", "format": "uri", "description": "The sponsor's website URL." },
        "isActive": { "type": "boolean", "description": "Whether the sponsor is currently active and should be displayed." },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "name", "logoUrl", "isActive", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores public user profiles and account-related data. Path-based ownership ensures only the user can access their own data."
    },
    "/users/{userId}/hosts/{hostId}": {
      "schema": { "$ref": "#/entities/Host" },
      "description": "Stores host profiles. Path-based ownership ensures only the user can access their own host profile. Includes `userId` as a parameter."
    },
    "/users/{userId}/wishlist/{experienceId}": {
      "schema": { "$ref": "#/entities/WishlistItem" },
      "description": "Stores a user's wishlisted experiences. The document ID is the experience ID for quick lookups."
    },
    "/users/{userId}/notifications/{notificationId}": {
      "schema": { "$ref": "#/entities/Notification" },
      "description": "Stores user-specific notifications."
    },
    "/hostApplications/{applicationId}": {
      "schema": { "$ref": "#/entities/HostApplication" },
      "description": "Stores applications from users wanting to become hosts."
    },
    "/experiences/{experienceId}": {
      "schema": { "$ref": "#/entities/Experience" },
      "description": "Stores cultural experiences offered by hosts. Includes `hostId` to enable listing experiences by host."
    },
    "/bookings/{bookingId}": {
      "schema": { "$ref": "#/entities/Booking" },
      "description": "Stores booking information. Includes `guestId`, `experienceId`, and `hostId` for efficient querying and authorization."
    },
    "/reviews/{reviewId}": {
      "schema": { "$ref": "#/entities/Review" },
      "description": "Stores reviews given by guests for experiences. Includes `guestId`, `experienceId`, and `hostId` for efficient querying and authorization."
    },
    "/conversations/{bookingId}": {
      "schema": { "$ref": "#/entities/Conversation" },
      "description": "Stores metadata for conversation threads. The document ID is the booking ID."
    },
    "/conversations/{bookingId}/messages/{messageId}": {
        "schema": { "$ref": "#/entities/Message" },
        "description": "Stores messages within a conversation thread."
    },
    "/reports/{reportId}": {
      "schema": { "$ref": "#/entities/Report" },
      "description": "Stores user-submitted reports and system flags for admin review."
    },
    "/admin_logs/{adminLogId}": {
      "schema": { "$ref": "#/entities/AdminLog" },
      "description": "Stores logs of actions performed by administrators."
    },
    "/coupons/{couponId}": {
      "schema": { "$ref": "#/entities/Coupon" },
      "description": "Stores discount coupons that can be applied to bookings."
    },
    "/sponsors/{sponsorId}": {
      "schema": { "$ref": "#/entities/Sponsor" },
      "description": "Stores information about sponsors and partners."
    }
  }
}
